.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man v6.0.2 (Pod::Simple 3.45)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Required to disable full justification in groff 1.23.0.
.if n .ds AD l
.\" ========================================================================
.\"
.IX Title "DLLTOOL 1"
.TH DLLTOOL 1 2025-08-16 binutils-2.45.50 "GNU Development Tools"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
binutils \- GNU Binary Utilities
.SH SYNOPSIS
.IX Header "SYNOPSIS"
dlltool [\fB\-d\fR|\fB\-\-input\-def\fR \fIdef\-file\-name\fR]
        [\fB\-b\fR|\fB\-\-base\-file\fR \fIbase\-file\-name\fR]
        [\fB\-e\fR|\fB\-\-output\-exp\fR \fIexports\-file\-name\fR]
        [\fB\-z\fR|\fB\-\-output\-def\fR \fIdef\-file\-name\fR]
        [\fB\-l\fR|\fB\-\-output\-lib\fR \fIlibrary\-file\-name\fR]
        [\fB\-y\fR|\fB\-\-output\-delaylib\fR \fIlibrary\-file\-name\fR]
        q[\fB\-\-export\-all\-symbols\fR] [\fB\-\-no\-export\-all\-symbols\fR]
        [\fB\-\-exclude\-symbols\fR \fIlist\fR]
        [\fB\-\-no\-default\-excludes\fR]
        [\fB\-S\fR|\fB\-\-as\fR \fIpath\-to\-assembler\fR] [\fB\-f\fR|\fB\-\-as\-flags\fR \fIoptions\fR]
        [\fB\-D\fR|\fB\-\-dllname\fR \fIname\fR] [\fB\-m\fR|\fB\-\-machine\fR \fImachine\fR]
        [\fB\-a\fR|\fB\-\-add\-indirect\fR]
        [\fB\-U\fR|\fB\-\-add\-underscore\fR] [\fB\-\-add\-stdcall\-underscore\fR]
        [\fB\-k\fR|\fB\-\-kill\-at\fR] [\fB\-A\fR|\fB\-\-add\-stdcall\-alias\fR]
        [\fB\-p\fR|\fB\-\-ext\-prefix\-alias\fR \fIprefix\fR]
        [\fB\-x\fR|\fB\-\-no\-idata4\fR] [\fB\-c\fR|\fB\-\-no\-idata5\fR]
        [\fB\-\-use\-nul\-prefixed\-import\-tables\fR]
        [\fB\-I\fR|\fB\-\-identify\fR \fIlibrary\-file\-name\fR] [\fB\-\-identify\-strict\fR]
        [\fB\-i\fR|\fB\-\-interwork\fR]
        [\fB\-n\fR|\fB\-\-nodelete\fR] [\fB\-t\fR|\fB\-\-temp\-prefix\fR \fIprefix\fR]
        [\fB\-v\fR|\fB\-\-verbose\fR]
        [\fB\-h\fR|\fB\-\-help\fR] [\fB\-V\fR|\fB\-\-version\fR]
        [\fB\-\-no\-leading\-underscore\fR] [\fB\-\-leading\-underscore\fR]
        [\fB\-\-deterministic\-libraries\fR] [\fB\-\-non\-deterministic\-libraries\fR]
        [object\-file ...]
.SH DESCRIPTION
.IX Header "DESCRIPTION"
\&\fBdlltool\fR は、\fB\-d\fR オプションと \fB\-b\fR オプション、およびコマンドラインで指定されたオブジェクトファイルからの入力を読み取ります。次に、これらの入力を処理し、 \fB\-e\fR オプションが指定されている場合は、エクスポートファイルを作成します。\fB\-l\fR オプションが指定されている場合はライブラリファイルが作成され、 \fB\-z\fR オプションが指定されている場合は定義ファイルが作成されます。1回の dlltool の呼び出しで、 \fB\-e\fR、\fB\-l\fR 、 \fB\-z\fR のオプションのいずれかまたはすべてを指定できます。
.PP
DLL を作成する場合、DLL のソースとともに、他に 3つのファイルが必要です。\fBdlltool\fR は、これらのファイルの作成を支援できます。
.PP
最初のファイルは \fI.def\fR ファイルで、DLL からエクスポートされる関数、DLL がインポートする関数などを指定します。これはテキストファイルであり、手動で作成することも、 \fBdlltool\fR を使用して\fB\-z\fR オプションを使用して作成することもできます。この場合、 \fBdlltool\fR はコマンドラインで指定されたオブジェクトファイルをスキャンして、エクスポートされるように特別にマークされた関数を探し、作成する \fI.def\fR ファイルにそれらのエントリを入力します。
.PP
関数を DLL からエクスポートされるようにマークするには、オブジェクトファイルの \fB.drectve\fR セクションに \fB\-export:<name_of_function>\fR エントリが必要です。これは、 C で \fBasm()\fR オペレーターを使用して行うことができます。
.PP
.Vb 2
\&          asm (".section .drectve");
\&          asm (".ascii \e"\-export:my_func\e"");
\&        
\&          int my_func (void) { ... }
.Ve
.PP
DLL の作成に必要な 2番目のファイルは、エクスポートファイルです。このファイルは、 DLL の本体を構成するオブジェクトファイルとリンクされ、 DLL と外部との間のインターフェイスを処理します。これはバイナリファイルであり、 \fI.def\fR ファイルの作成時または読み取り時に、\fBdlltool\fR にオプション \fB\-e\fR を指定することで作成できます。
.PP
DLL の作成に必要な 3番目のファイルは、プログラムが DLL 内の関数にアクセスするためにリンクするライブラリファイル(「インポートライブラリ」)です。このファイルは、 \fI.def\fR ファイルを作成または読み取るときに、dlltoolに \fB\-l\fR オプションを指定することで作成できます。
.PP
\&\fB\-y\fR オプションが指定されている場合、dlltool は、通常のインポートライブラリの代わりに使用できる遅延インポートライブラリを生成します。これにより、インポートされた機能が最初に呼び出されたときにのみ、プログラムが dll にリンクできるようになります。生成された実行ファイルは、 _\|\fB_delayLoadHelper2()\fR を含むスタティックな delayimp ライブラリにリンクする必要があります。これにより、kernel32 から LoadLibraryA と GetProcAddress がインポートされます。
.PP
\&\fBdlltool\fR はライブラリファイルを手動で構築しますが、exports ファイルは、アセンブラ文を含む一時ファイルを作成してからアセンブルすることで構築します。\fB\-S\fR コマンドラインオプションを使用して、 dlltool が使用するアセンブラへのパスを指定できます。また、 \fB\-f\fR オプションを使用して、特定のフラグをそのアセンブラに渡すことができます。\fB\-n\fR を使用すると、 dlltool が完了したときにこれらの一時アセンブラファイルを削除しないようにすることができます。また、\fB\-n\fR を2回指定すると、 dlltool がライブラリの構築に使用した一時オブジェクトファイルを削除しないようにすることができます。
.PP
ソースファイル \fBdll.c\fR から DLL を作成し、その \fBprogram.o\fR) を使用するプログラムを( DLLというオブジェクトファイルから)作成する例を次に示します。
.PP
.Vb 4
\&          gcc \-c dll.c
\&          dlltool \-e exports.o \-l dll.lib dll.o
\&          gcc dll.o exports.o \-o dll.dll
\&          gcc program.o dll.lib \-o program
.Ve
.PP
\&\fBdlltool\fR は、既存のインポートライブラリを照会して、それが関連付けられている DLL の名前を決定するためにも使用できます。\fB\-I\fR または \fB\-\-identify\fR オプションの説明を参照してください。
.SH OPTIONS
.IX Header "OPTIONS"
コマンドラインオプションには次の意味があります:
.IP "\fB\-d\fR \fIfilename\fR" 4
.IX Item "-d filename"
.PD 0
.IP "\fB\-\-input\-def\fR \fIfilename\fR" 4
.IX Item "--input-def filename"
.PD
読み込んで処理する \fI.def\fR ファイルの名前を指定します。
.IP "\fB\-b\fR \fIfilename\fR" 4
.IX Item "-b filename"
.PD 0
.IP "\fB\-\-base\-file\fR \fIfilename\fR" 4
.IX Item "--base-file filename"
.PD
読み込んで処理するベースファイルの名前を指定します。このファイルの内容は、 dlltool によって生成されたエクスポート・ファイルの再配置セクションに追加されます。
.IP "\fB\-e\fR \fIfilename\fR" 4
.IX Item "-e filename"
.PD 0
.IP "\fB\-\-output\-exp\fR \fIfilename\fR" 4
.IX Item "--output-exp filename"
.PD
dlltool で作成するエクスポートファイルの名前を指定します。
.IP "\fB\-z\fR \fIfilename\fR" 4
.IX Item "-z filename"
.PD 0
.IP "\fB\-\-output\-def\fR \fIfilename\fR" 4
.IX Item "--output-def filename"
.PD
dlltool で作成する \fI.def\fR ファイルの名前を指定します。
.IP "\fB\-l\fR \fIfilename\fR" 4
.IX Item "-l filename"
.PD 0
.IP "\fB\-\-output\-lib\fR \fIfilename\fR" 4
.IX Item "--output-lib filename"
.PD
dlltool で作成するライブラリファイルの名前を指定します。
.IP "\fB\-y\fR \fIfilename\fR" 4
.IX Item "-y filename"
.PD 0
.IP "\fB\-\-output\-delaylib\fR \fIfilename\fR" 4
.IX Item "--output-delaylib filename"
.PD
dlltool で作成する遅延インポートライブラリファイルの名前を指定します。
.IP \fB\-\-deterministic\-libraries\fR 4
.IX Item "--deterministic-libraries"
.PD 0
.IP \fB\-\-non\-deterministic\-libraries\fR 4
.IX Item "--non-deterministic-libraries"
.PD
\&\fB\-\-output\-lib\fR または\fB\-\-output\-delaylib\fR のいずれかのオプションに応答して出力ライブラリーを作成するときには、すべてのタイムスタンプ、ユーザーID、およびグループIDにゼロの値を使用するか (\fB\-\-deterministic\-libraries\fRの場合) 、あるいは実際のタイムスタンプ、ユーザーID、およびグループID (\fB\-\-non\-deterministic\-libraries\fRの場合)の値を使用します。
.IP \fB\-\-export\-all\-symbols\fR 4
.IX Item "--export-all-symbols"
入力オブジェクトファイルにあるグローバルシンボルと weak 定義シンボルをすべて、エクスポートするシンボルとして扱います。デフォルト時にはエクスポートされない小さなシンボルのリストがあります。\fB\-\-no\-default\-excludes\fR オプションを参照してください。\fB\-\-exclude\-symbols\fR オプションを使用すると、エクスポートしないシンボルのリストに追加できます。
.IP \fB\-\-no\-export\-all\-symbols\fR 4
.IX Item "--no-export-all-symbols"
入力された \fI.def\fR ファイルまたはオブジェクトファイルの\fB.drectve\fR セクションに明示的にリストされているシンボルのみを書き出します。これがデフォルトの動作です。\fB.drectve\fR セクションは、ソース・コードの \fBdllexport\fR 属性によって作成されます。
.IP "\fB\-\-exclude\-symbols\fR \fIlist\fR" 4
.IX Item "--exclude-symbols list"
シンボルを \fIlist\fR にエクスポートしません。これはコンマまたはコロンで区切られたシンボル名のリストです。シンボル名の先頭にアンダースコアを付けることはできません。これは、 \fB\-\-export\-all\-symbols\fR が使用されている場合にのみ意味があります。
.IP \fB\-\-no\-default\-excludes\fR 4
.IX Item "--no-default-excludes"
\&\fB\-\-export\-all\-symbols\fR を使用すると、デフォルトで特定の特殊シンボルのエクスポートが回避されます。現在、エクスポートを避けるべきシンボルのリストは、 \fBDllMain@12\fR、\fBDllEntryPoint@0\fR、\fBimpure_ptr\fRです。\fB\-\-no\-default\-excludes\fR オプションを使用して、これらの特殊シンボルをエクスポートすることもできます。これは、 \fB\-\-export\-all\-symbols\fR が使用されている場合にのみ意味があります。
.IP "\fB\-S\fR \fIpath\fR" 4
.IX Item "-S path"
.PD 0
.IP "\fB\-\-as\fR \fIpath\fR" 4
.IX Item "--as path"
.PD
エクスポートファイルの作成に使用するアセンブラのパス (ファイル名を含む) を指定します。
.IP "\fB\-f\fR \fIoptions\fR" 4
.IX Item "-f options"
.PD 0
.IP "\fB\-\-as\-flags\fR \fIoptions\fR" 4
.IX Item "--as-flags options"
.PD
エクスポートファイルを構築する際にアセンブラに渡すコマンドラインオプションを指定します。このオプションは、 \fB\-S\fR オプションが使用されていない場合でも機能します。このオプションに指定できる引数は 1つだけです。コマンドラインで引数が複数回指定された場合は、後から指定された引数が先に指定された引数を上書きします。したがって、アセンブラに複数のオプションを渡す必要がある場合は、それらを二重引用符で囲む必要があります。
.IP "\fB\-D\fR \fIname\fR" 4
.IX Item "-D name"
.PD 0
.IP "\fB\-\-dll\-name\fR \fIname\fR" 4
.IX Item "--dll-name name"
.PD
\&\fB\-e\fR オプションを使用するときに、DLLの名前として \fI.def\fR ファイルに格納される名前を指定します。このオプションが存在しない場合、 \fB\-e\fR オプションに指定されたファイル名が DLL の名前として使用されます。
.IP "\fB\-m\fR \fImachine\fR" 4
.IX Item "-m machine"
.PD 0
.IP "\fB\-machine\fR \fImachine\fR" 4
.IX Item "-machine machine"
.PD
ライブラリファイルを構築するマシンのタイプを指定します。\fBdlltool\fR には、作成方法に応じてデフォルトのタイプが組み込まれていますが、このオプションを使用してそれを上書きできます。これは通常、ARM プロセッサ用の DLL を作成する場合、つまり DLL の内容が実際に Thumb 命令を使用してエンコードされる場合にのみ役立ちます。
.IP \fB\-a\fR 4
.IX Item "-a"
.PD 0
.IP \fB\-\-add\-indirect\fR 4
.IX Item "--add-indirect"
.PD
\&\fBdlltool\fR がエクスポートファイルを作成するときに、インポートライブラリを使用せずにエクスポートされた関数を参照できるセクションを追加する必要があることを指定します。それが何を意味するにせよ!
.IP \fB\-U\fR 4
.IX Item "-U"
.PD 0
.IP \fB\-\-add\-underscore\fR 4
.IX Item "--add-underscore"
.PD
\&\fBdlltool\fR がエクスポートファイルを作成するときに、 \fIall\fR のエクスポートされたシンボルの名前の先頭にアンダースコアを付加する必要があることを指定します。
.IP \fB\-\-no\-leading\-underscore\fR 4
.IX Item "--no-leading-underscore"
.PD 0
.IP \fB\-\-leading\-underscore\fR 4
.IX Item "--leading-underscore"
.PD
標準シンボルを強制的に接頭表記するかどうかを指定します。
.IP \fB\-\-add\-stdcall\-underscore\fR 4
.IX Item "--add-stdcall-underscore"
\&\fBdlltool\fR がエクスポートファイルを作成するときに、エクスポートされた\fIstdcall\fR 関数の名前の先頭にアンダースコアを付ける必要があることを指定します。. 変数名と、非 stdcall な関数名は変更されません。
このオプションは、MS\-Windows ツールでビルドされたサードパーティ DLL 用の GNU 互換インポートライブラリを作成する場合に便利です。
.IP \fB\-k\fR 4
.IX Item "-k"
.PD 0
.IP \fB\-\-kill\-at\fR 4
.IX Item "--kill-at"
.PD
DLL からインポートされる stdcall 関数の名前から \fB@<number>\fR サフィックスを省略するように指定します。これは、stdcall 関数をエクスポートする DLL のインポートライブラリを作成するときに便利ですが、通常の \fB@<number>\fR シンボル名の接尾辞は付きません。
.Sp
これにより、インポートライブラリがリンクしているプログラムによって提供されるシンボルの名前を変更することはなく、インポートテーブル内のエントリ(つまり、 .idata セクション)のみが変更されます。
.IP \fB\-A\fR 4
.IX Item "-A"
.PD 0
.IP \fB\-\-add\-stdcall\-alias\fR 4
.IX Item "--add-stdcall-alias"
.PD
\&\fBdlltool\fR がエクスポートファイルを作成するときに、 \fB@ <number>\fR を持つシンボルに加えて、\fB@ <number>\fR を持たない stdcall シンボルのエイリアスを追加するように指定します。
.IP \fB\-p\fR 4
.IX Item "-p"
.PD 0
.IP "\fB\-\-ext\-prefix\-alias\fR \fIprefix\fR" 4
.IX Item "--ext-prefix-alias prefix"
.PD
\&\fBdlltool\fR に、指定した接頭辞を持つすべての DLL インポートの外部別名を作成させます。外部シンボルとインポートシンボルの両方に、先頭にアンダースコアのないエイリアスが作成されます。
.IP \fB\-x\fR 4
.IX Item "-x"
.PD 0
.IP \fB\-\-no\-idata4\fR 4
.IX Item "--no-idata4"
.PD
\&\fBdlltool\fR がエクスポートファイルとライブラリファイルを作成するときに、\f(CW\*(C`.idata4\*(C'\fR セクションを省略するように指定します。これは、特定のオペレーティングシステムとの互換性のためです。
.IP \fB\-\-use\-nul\-prefixed\-import\-tables\fR 4
.IX Item "--use-nul-prefixed-import-tables"
\&\fBdlltool\fR がエクスポートファイルとライブラリファイルを作成するときに、\f(CW\*(C`.idata4\*(C'\fR と\f(CW\*(C`.idata5\*(C'\fR の前にゼロ要素を付ける必要があることを指定します。これは古い gnu import ライブラリ世代の \f(CW\*(C`dlltool\*(C'\fR をエミュレートします。既定では、このオプションはオフになっています。
.IP \fB\-c\fR 4
.IX Item "-c"
.PD 0
.IP \fB\-\-no\-idata5\fR 4
.IX Item "--no-idata5"
.PD
\&\fBdlltool\fR がエクスポートファイルとライブラリファイルを作成するときに、 \f(CW\*(C`.idata5\*(C'\fR セクションを省略するように指定します。これは、特定のオペレーティングシステムとの互換性のためです。
.IP "\fB\-I\fR \fIfilename\fR" 4
.IX Item "-I filename"
.PD 0
.IP "\fB\-\-identify\fR \fIfilename\fR" 4
.IX Item "--identify filename"
.PD
\&\fBdlltool\fR が \fIfilename\fR から指示されたエクスポートライブラリを検査し、関連する DLL の名前を \f(CW\*(C`stdout\*(C'\fR に出力することを指定します。これは、他のオプションと引数で示される他の操作に加えて実行できます。
インポートライブラリがが存在しないか、実際にはインポートライブラリでない場合、\fBdlltool\fR は失敗します。\fB\-\-identify\-strict\fR も参照してください。
.IP \fB\-\-identify\-strict\fR 4
.IX Item "--identify-strict"
\&\fB\-\-identify\fR オプションの動作を変更して、\fIfilename\fR が複数の DLL に関連付けられている場合にエラーを報告するようにします。
.IP \fB\-i\fR 4
.IX Item "-i"
.PD 0
.IP \fB\-\-interwork\fR 4
.IX Item "--interwork"
.PD
\&\fBdlltool\fR がライブラリファイル内のオブジェクトをマークし、 ARM と Thumb のコード間のインターワーキングをサポートするために生成するファイルをエクスポートするように指定します。
.IP \fB\-n\fR 4
.IX Item "-n"
.PD 0
.IP \fB\-\-nodelete\fR 4
.IX Item "--nodelete"
.PD
\&\fBdlltool\fR に、エクスポートファイルの作成に使用した一時的なアセンブラファイルを保存させます。このオプションを繰り返すと、 dlltool はライブラリファイルの作成に使用する一時オブジェクトファイルも保存します。
.IP "\fB\-t\fR \fIprefix\fR" 4
.IX Item "-t prefix"
.PD 0
.IP "\fB\-\-temp\-prefix\fR \fIprefix\fR" 4
.IX Item "--temp-prefix prefix"
.PD
一時的なアセンブラファイルとオブジェクトファイルの名前を作成するときに、 \fBdlltool\fR が \fIprefix\fR を使用するようにします。デフォルトでは、一時ファイルの接頭辞は pid から生成されます。
.IP \fB\-v\fR 4
.IX Item "-v"
.PD 0
.IP \fB\-\-verbose\fR 4
.IX Item "--verbose"
.PD
dlltool に何をしているのか表示させます。
.IP \fB\-h\fR 4
.IX Item "-h"
.PD 0
.IP \fB\-\-help\fR 4
.IX Item "--help"
.PD
コマンドラインオプションの一覧を表示し終了します。
.IP \fB\-V\fR 4
.IX Item "-V"
.PD 0
.IP \fB\-\-version\fR 4
.IX Item "--version"
.PD
dlltool のバージョン番号を表示し終了します。
.IP \fB@\fR\fIfile\fR 4
.IX Item "@file"
\&\fIfile\fRからコマンドラインオプションを読み込みます。読み込まれたオプショ
ンは、元の@\fIfile\fR オプションの代わりに挿入されます。 \fIfile\fRが存
在しない場合、または読み込めない場合、オプションは文字通りに扱われ、削除
されません。
.Sp
\&\fIfile\fR 中のオプションは空白で区切られます。空白文字は、オプション全
体を一重引用符または二重引用符で囲むことによってオプションに含めることが
できます。任意の文字(バックスラッシュを含む)は、含まれる文字の前にバック
スラッシュを付けることによって含めることができます。 \fIfile\fR 自体に追
加の@\fIfile\fR オプションを含めることができます。このようなオプション
は再帰的に処理されます。
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbinutils\fR の Info ページ。
.SH COPYRIGHT
.IX Header "COPYRIGHT"
Copyright (c) 1991\-2025 Free Software Foundation, Inc.
.PP
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front\-Cover Texts, and with no
Back\-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License".
