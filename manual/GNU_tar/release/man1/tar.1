.\" This file is part of GNU tar. -*- nroff -*-
.\" Copyright 2013-2019 Free Software Foundation, Inc.
.\"
.\" GNU tar is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 3 of the License, or
.\" (at your option) any later version.
.\"
.\" GNU tar is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <http://www.gnu.org/licenses/>.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.\"
.\" Japanese Version Copyright (c) 1997 Atsushi Yamagata,
.\"   and 2020 Yuichi Sato and Yoichi Chonan,
.\"         all rights reserved.
.\" 1997/09/17 Atsushi Yamagata <yamagata@jwu.ac.jp>
.\" Updated and modified (tar-1.32) Wed Feb 26 18:15:15 JST 2020
.\"         by Yuichi SATO <ysato444@ybb.ne.jp>
.\"         and Yoichi Chonan <cyoichi@maple.ocn.ne.jp>
.\"
.TH TAR 1 "February 4, 2019" TAR "GNU TAR Manual"
.SH 名前
tar \- アーカイブユーティリティ
.SH 書式
.SS 伝統的な使用法
\fBtar\fP {\fBA\fP|\fBc\fP|\fBd\fP|\fBr\fP|\fBt\fP|\fBu\fP|\fBx\fP}[\fBGnSkUWOmpsMBiajJzZhPlRvwo\fP]
[\fIARG\fP...]
.SS "UNIX スタイルの使用法"
.sp
\fBtar\fP \fB\-A\fP [\fIOPTIONS\fP] \fIARCHIVE\fP \fIARCHIVE\fP
.sp
\fBtar\fP \fB\-c\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-d\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-t\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIMEMBER\fP...]
.sp
\fBtar\fP \fB\-r\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-u\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-x\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIMEMBER\fP...]
.SS "GNU スタイルの使用法"
.sp
\fBtar\fP {\fB\-\-catenate\fP|\fB\-\-concatenate\fP} [\fIOPTIONS\fP] \fIARCHIVE\fP \fIARCHIVE\fP
.sp
\fBtar\fP \fB\-\-create\fP [\fB\-\-file\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP {\fB\-\-diff\fP|\fB\-\-compare\fP} [\fB\-\-file\fP \fIARCHIVE\fP] [\fIOPTIONS\fP]
[\fIFILE\fP...]
.sp
\fBtar\fP \fB\-\-delete\fP [\fB\-\-file\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIMEMBER\fP...]
.sp
\fBtar\fP \fB\-\-append\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-\-list\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIMEMBER\fP...]
.sp
\fBtar\fP \fB\-\-test\-label\fP [\fB\-\-file\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fILABEL\fP...]
.sp
\fBtar\fP \fB\-\-update\fP [\fB\-\-file\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP \fB\-\-update\fP [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP] [\fIFILE\fP...]
.sp
\fBtar\fP {\fB\-\-extract\fP|\fB\-\-get\fP} [\fB\-f\fP \fIARCHIVE\fP] [\fIOPTIONS\fP]
[\fIMEMBER\fP...]
.SH 注記
この man ページは GNU \fBtar\fP の簡単な説明である。 使用例や推奨される使い方を含む詳しい議論については、texinfo 形式の
\fBGNU Tar Manual\fP をご覧になっていただきたい。\fBinfo\fP リーダーと tar
関連文書が御使用のシステムに正しくインストールされているなら、コマンド
.PP
.RS +4
\fBinfo tar\fP
.RE
.PP
で詳細なマニュアルが読めるはずである。
.PP
詳細なマニュアルは、 \fBemacs\fP(1)  の info モードでも閲覧することができる。
また、下記のサイトに行けば、様々な形式にした詳細マニュアルのオンライン版を見つけることができる。
.PP
.RS +4
\fBhttp://www.gnu.org/software/tar/manual\fP
.RE
.PP
この man ページと \fBGNU Tar Manual\fP の内容に食い違いがある場合は、後者の方が信頼できる情報源である。
.SH 説明
GNU \fBtar\fP は、アーカイブプログラムである。アーカイブプログラムとは、複数のファイルを 1 個のファイル (\fBアーカイブ\fP) に格納したり、
そうしたアーカイブを操作したりするためのプログラムだ。 アーカイブは、通常ファイルであってもよく、デバイスであってもよい
(後者の一例がテープドライブであり、このプログラムの名前は、そこから来ている。 すなわち、\fBt\fPape \fBar\fPchiver ということだ)。
そうしたファイルやデバイスは、ローカルマシンにあってもよく、 リモートマシンにあってもよい。
.PP

.SS オプション形式
GNU \fBtar\fP のオプションは、3 つの異なる形式で指定できる。\fB伝統的なスタイル\fP
では、最初の引き数は、オプション文字の集まりであり、それに続くすべての引き数は、
そうしたオプションが引き数を要求する場合に、その引き数になる。
なお、そうした引き数は、オプション文字と同じ順番で読み込まれる。
すべてのオプションの処理が終わった後で、コマンドラインに残っている単語があれば、
それは、オプションの引き数ではない引き数として扱われる。
すなわち、ファイルやアーカイブメンバーの名前である。
.PP
たとえば、\fBc\fP オプションは、アーカイブの作成を指示し、\fBv\fP オプションは、
やっていることを表示するように要求し、\fBf\fP オプションは、
操作対象のアーカイブ名を引き数に取る。
伝統的なスタイルで書かれた次のコマンドは、ディレクトリ \fB/etc\fP
のすべてのファイルをアーカイブファイル \fBetc.tar\fP
に格納し、どんなファイルをアーカイブに入れたか、詳しいリストを表示せよと
tar に命じている。
.PP
.EX
\fBtar cfv etc.tar /etc\fP
.EE
.PP
\fBUNIX スタイル\fP、すなわち\fB短いオプション形式\fPでは、
他のコマンドラインユーティリティと同様に、各オプション文字には、
1 個のダッシュがその前に付く。オプションが引き数を取る場合は、引き数はその後に続く。
引き数は、コマンドライン上の独立した単語としてオプションとの間にスペースを置いて指定してもよく、
スペースを挟まずオプションに直接続けてもよい。ただし、オプションの引き数が\fB任意である\fP
(訳注: あることも、ないこともある) 場合は、その引き数は \fB\-g/tmp/snar.db\fP
のように、オプション文字の後にスペースなしで続けなければならない。
.PP
引き数をとらないオプションは、1 個のダッシュの後に何個でもまとめて指定できる。 たとえば、\fB\-vkp\fP のようにだ。引き数を
(必須であれ任意であれ)  取るオプションがあったら、ひとつにまとめたオプションの最後に置けばよい。 \fB\-vkpf a.tar\fP がその一例である。
.PP
上で例示したコマンドは、 \fB短いオプション形式\fPで書けば、以下のようになるだろう。
.PP
.EX
\fBtar \-cvf etc.tar /etc\fP
または、
\fBtar \-c \-v \-f etc.tar /etc\fP
.EE
.PP
\fBGNU スタイル\fP、すなわち\fB長いオプション形式\fPでは、 各オプションは、2 個のダッシュに続く意味を持った名前であり、
小文字とダッシュから構成されている。使用に当たって、長いオプションは、
曖昧さを生じないかぎり、最初の数文字に短縮できる。長いオプションに対する引き数は、 そのオプションの直後にコマンドライン上の独立した単語として (訳注:
すなわち、間にスペースを置いて) 指定するか、あるいは、オプションとの間を等号 (=) で区切り、等号の前後にはスペースを入れずに指定する。
指定するかしないかが任意の引き数では、必ず後者の書式を使わなければならない。
.PP
上記のコマンド例をこの形式で書くには、次のようないくつかの方法がある。
.PP
.EX
\fBtar \-\-create \-\-file etc.tar \-\-verbose /etc\fP
.EE
または (オプションをいくつか短縮して)、
.EX
\fBtar \-\-cre \-\-file=etc.tar \-\-verb /etc\fP
.EE
.IP "[\fB訳注\fP]:" 8
二番目の用例は、失敗すると思う。現在では、\fB\-\-verbose\fP のほかに 
\fB\-\-verbatim\-files\-from\fP というオプションもあるので、
\fB\-\-verb\fP では曖昧になってしまうのだ。
.PP
オプションは、3 種の形式すべてを混ぜて使うことができるが、 伝統的なオプションを混ぜて使うのはお勧めできない。
.SS 操作モード
以下に列挙したオプションは、GNU \fBtar\fP にかくかくしかじかの操作をせよと命ずるものだ。
指定するのは、この内のただ 1 つでなければならない。
オプションの引き数ではない引き数がどんな意味になるかは、要求した操作モード次第である。
.IP "[\fB訳注\fP]" 8
以下、この「\fB操作モード\fP」セクションの中で、単に「引き数」とだけ言ったときは、
オプションの引き数ではない引き数のことである。
.TP 
\fB\-A\fP, \fB\-\-catenate\fP, \fB\-\-concatenate\fP
アーカイブを別のアーカイブの末尾に追加する。
引き数は追加するアーカイブの名前と見なされる。すべての追加するアーカイブは、
追加される側のアーカイブ (訳注: これは \fB\-f\fP オプションの引き数で指定する)
と同じ形式でなければならない。そうでないと、作成されたアーカイブが、GNU 以外の
\fBtar\fP の実装で使えなくなる可能性がある。
なお、注意してほしいが、2 個以上のアーカイブを引き数として指定した場合に、1
番目のアーカイブ以外のアーカイブのメンバーが、作成されたアーカイブでアクセスできるのは、
\fB\-i\fP (\fB\-\-ignore\-zeros\fP) オプションを使用した場合だけである。

圧縮したアーカイブの結合はできない。
.TP 
\fB\-c\fP, \fB\-\-create\fP
新しいアーカイブを作成する。
引き数はアーカイブに入れるファイルの名前である
(訳注: 作成するアーカイブファイルの名前は、\fB\-f\fP オプションの引き数で指定する)。
\fB\-\-no\-recursion\fP オプションが指定されないかぎり、ディレクトリは再帰的にアーカイブされる。
.TP 
\fB\-d\fP, \fB\-\-diff\fP, \fB\-\-compare\fP
アーカイブとファイルシステムの間に相違があるかどうかを調べる。
引き数は任意だが、指定するなら、比較したいアーカイブのメンバーである。
指定しない場合は、カレントワーキングディレクトリを指定したものと見なされる。
(訳注: info マニュアルの説明は少し違い、「メンバーを 1 つも指定しない場合、
\fBtar\fP はアーカイブ全体を比較する」となっている。)
.TP 
\fB\-\-delete\fP
アーカイブから削除する。引き数はアーカイブから削除するメンバーの名前である。少なくとも
1 つは引き数を指定しなければならない。

このオプションは圧縮したアーカイブには使えない。 これと等価な短いオプションはない。
.TP 
\fB\-r\fP, \fB\-\-append\fP
アーカイブの最後にファイルを追加する。引き数の意味は、\fB\-c\fP (\fB\-\-create\fP)
と同じである。
.TP 
\fB\-t\fP, \fB\-\-list\fP
アーカイブの内容一覧を表示する。引き数は任意である。 引き数が指定された場合は、表示すべきメンバーの名前となる。
.TP 
\fB\-\-test\-label\fP
アーカイブのボリュームラベルをテストして終了する。
引き数を指定せずに使用すると、ボリュームラベルを (もしあれば)
表示し、ステータス \fB0\fP で終了する。1 つ以上のコマンドライン引き数を指定すると、\fBtar\fP
はボリュームラベルを各引き数と比較する。引き数にマッチするラベルがあった場合は、コード
\fB0\fP で終了し、なかった場合は、
コード \fB1\fP で終了する。その際、\fB\-v\fP (\fB\-\-verbose\fP)
オプションが一緒に指定されないかぎり、出力に何も表示されない。

これと等価な短いオプションはない。
.TP 
\fB\-u\fP, \fB\-\-update\fP
アーカイブ内の同名のコピーより新しいファイルだけを追加する。 引き数の意味は、\fB\-c\fP や \fB\-r\fP オプションと同じである。
気を付けてほしいが、新しいファイルが、古いアーカイブコピーに置き換わるわけではない。 そうではなくて、アーカイブの末尾に追加されるのである。
従って、作成されたアーカイブには、同じファイルの様々なバージョンに当たる、 同じ名前の複数のメンバーが含まれるかもしれない。
.TP 
\fB\-x\fP, \fB\-\-extract\fP, \fB\-\-get\fP
アーカイブからファイルを抽出する。引き数は任意である。 引き数が指定された場合、抽出するアーカイブメンバーの名前となる。
.TP 
.TP 
\fB\-\-show\-defaults\fP
\fBtar\fP のいくつかのオプションについて組み込みのデフォルトを表示して、終了する。 引き数は指定できない。
.TP 
\fB\-?\fP, \fB\-\-help\fP
簡単なオプションのサマリーを表示して、終了する。 引き数は指定できない。
.TP 
\fB\-\-usage\fP
指定可能なオプションのリストを表示して、終了する。 引き数は指定できない。
.TP 
\fB\-\-version\fP
プログラムのバージョンと著作権情報を表示して、終了する。
.SH オプション
.SS 操作の調節
.TP 
\fB\-\-check\-device\fP
インクリメンタルアーカイブを作成する際に、デバイス番号をチェックする (デフォルト)。
.TP 
\fB\-g\fP, \fB\-\-listed\-incremental\fP=\fIFILE\fP
新 GNU 形式のインクリメンタルバックアップを取り扱う。
\fIFILE\fP は\fBスナップショットファイル\fPの名前である
(訳注: このオプションの引き数 \fIFILE\fP の指定は必須である)。tar
はそこに補助情報を記録しておき、その情報を使って、前回のインクリメンタルダンプの後で、
どのファイルが変更され、従って、再度ダンプしなければならないかを判断する。
アーカイブの作成時に \fIFILE\fP が存在しない場合は、\fIFILE\fP
が作られ、すべてのファイルが作成されるアーカイブに格納されることになる
(これが \fBlevel 0\fP のダンプである)。\fBN\fP が 0 ではない level \fBN\fP
のインクリメンタルアーカイブを作成するには、level \fBN\-1\fP
のアーカイブを作成したときに出来たスナップショットファイルのコピーを作って、それを
\fIFILE\fP として使用すればよい。

アーカイブの内容表示やメンバーの抽出の際には、\fIFILE\fP
の中身が実際に調べられるわけではない。tar の文法上
\fB\-\-listed\-incremental\fP は引き数を取ることになっているので、\fIFILE\fP
の指定が必要なだけなのだ。それ故、\fIFILE\fP として \fB/dev/null\fP
を使うのは、常套手段である。
.RS
.IP "[\fB訳注\fP]" 8
\fBlevel\fP の利用法については、すこし説明が足りないと思う。
たとえば、最初にインクリメンタルアーカイブを作成したときに
(すなわち level 0 のダンプをしたときに)
作ったスナップショットファイルが ./snap だったとしよう。これを snap0
としてバックアップしておく。そして、インクリメンタルバックアップを行うたびに、この
snap0 をコピーしてスナップショットファイルとして使用する。そうすると、常に
level 1 のインクリメンタルアーカイブが出来るわけだ。
こうしておけば、最初のアーカイブと最後のアーカイブを抽出
(この場合、「展開」の方がピッタリした表現だが)
するだけで、最後のインクリメンタルアーカイブを作成したときの状態が復元できることになる。
もし復元したいのが、最後の 1 つ前の状態なら、最初と最後の
1 つ前のアーカイブを使用すればよい。
\fBinfo tar\fP の "Incremental Dumps" と "Backup Levels"
を参照していただきたい。
.RE
.TP 
\fB\-\-hole\-detection\fP=\fIMETHOD\fP
スパースファイル (sparse file) の穴 (hole) の検出に
\fIMETHOD\fP を使う。このオプションは、\fB\-\-sparse\fP
を暗黙裡に設定する。\fIMETHOD\fP に指定できる値は、\fBseek\fP と \fBraw\fP
である。デフォルトは \fBseek\fP であり、使用できない場合は \fBraw\fP を使う。
.TP 
\fB\-G\fP, \fB\-\-incremental\fP
旧 GNU 形式のインクリメンタルバックアップを取り扱う。
.TP 
\fB\-\-ignore\-failed\-read\fP
読み込み不能なファイルがあっても、ゼロ以外の返り値で終了しない。
.TP 
\fB\-\-level\fP=\fINUMBER\fP
作成するリスト化インクリメンタルアーカイブ
(訳注: すなわち、新 GNU 形式のインクリメンタルアーカイブ)
のダンプレベルを設定する。 現在のところ、\fB\-\-level=0\fP
のみが意味を持つ。 これを指定すると、\fBtar\fP
はダンプする前にスナップショットファイルをサイズ 0
に短縮し、 強制的にレベル 0 のダンプにする。
.TP 
\fB\-n\fP, \fB\-\-seek\fP
アーカイブがシーク (seek) 可能であると見なす。通常、\fBtar\fP は、
アーカイブがシーク可能であるか否かを自動的に判断する。
このオプションは、そうした判断がうまく行かない場合に使うためのものである。
このオプションは、アーカイブを読み込むためにオープンしている場合にのみ効果がある
(たとえば、 \fB\-\-list\fP または \fB\-\-extract\fP オプションが指定されている場合)。
.TP 
\fB\-\-no\-check\-device\fP
インクリメンタルアーカイブを作成する際に、デバイス番号をチェックしない。
.TP 
\fB\-\-no\-seek\fP
アーカイブがシーク可能でないと見なす。
.TP 
\fB\-\-occurrence\fP[=\fIN\fP]
アーカイブ中の各ファイルについて、\fIN\fP 番目に現れるものだけを処理の対象にする。 このオプションは、サブコマンド \fB\-\-delete\fP,
\fB\-\-diff\fP, \fB\-\-extract\fP, \fB\-\-list\fP の 1 つとともに使用し、 しかも、ファイルのリストを、コマンドライン上、または
\fB\-T\fP オプションで指定している場合にのみ、有効である。オプション引き数 \fIN\fP の指定は任意だが、デフォルトでは \fB1\fP
になっている。(訳注: \-r や \-u オプションを使った場合、アーカイブ中に同名のメンバーが複数存在することがある。
そうした場合に、何番目のメンバーを抽出などの対象にするかを指名するのである。)
.TP 
\fB\-\-restrict\fP
有害かもしれないいくつかのオプションを無効化する。
.TP 
\fB\-\-sparse\-version\fP=\fIMAJOR\fP[.\fIMINOR\fP]
スパースファイルで使用するスパースフォーマットのバージョンを指定する。 このオプションは \fB\-\-sparse\fP を暗黙裡に設定する。
引き数に指定できる値は、 \fB0.0\fP, \fB0.1\fP, \fB1.0\fP のいずれかである。 スパースフォーマットについての詳しい議論については、
\fBGNU Tar Manual\fP, appendix \fBD\fP, "\fBSparse Formats\fP" をご覧いただきたい。\fBinfo\fP
リーダーを使用する場合は、コマンド \fBinfo tar 'Sparse Formats'\fP で読むことができる。
.TP 
\fB\-S\fP, \fB\-\-sparse\fP
スパースファイルを効率的に取り扱う。ファイルシステム上のファイルの中には、
実際の書き込みが一度も行われたことのないセグメントを含むものがある
(そうしたものが \fBDBM\fP
のようなシステムで作られたデータベースファイルだったりするのは、よくあることだ)。
このオプションを指定すると、\fBtar\fP は、ファイルをアーカイブに入れる前に、
それがスパースファイルかどうかを判断しようとする。
そして、もしそうなら、ファイル中の空っぽの部分をダンプしないことによって、
生成するアーカイブのサイズを小さくする。
.SS 上書きの制御
以下のオプションは、アーカイブからファイルを抽出することで、
ディスク上にある同名ファイルの上書きが生じる場合の tar の挙動を制御する。
.TP 
\fB\-k\fP, \fB\-\-keep\-old\-files\fP
抽出時に、既存のファイルを置き換えない。
.TP 
\fB\-\-keep\-newer\-files\fP
既存のファイルがアーカイブコピーより新しい場合、それを置き換えない。
.TP 
\fB\-\-keep\-directory\-symlink\fP
抽出する際に、ディレクトリを指す同名のシンボリックリンクがすでに存在している場合は、
それをアーカイブ中の実ディレクトリで置き換えない。(訳注:
その場合は、そのシンボリックの参照先にアーカイブ中のディレクトリの中身を展開する。
このオプションを指定しないデフォルトでは、まずシンボリックリンクを消去し、
それからディレクトリの抽出を行うことになる。)
.TP 
\fB\-\-no\-overwrite\-dir\fP
既存のディレクトリのメタデータを変更しない。
.TP 
\fB\-\-one\-top\-level\fP[\fB=\fP\fIDIR\fP]
すべてのファイルを \fIDIR\fP に抽出する。引き数なしで使用すると、
アーカイブのベースネームにちなんだ名前のサブディレクトリに抽出することになる
(詳しく言うと、アーカイブのベースネームから \fB\-\-auto\-compress\fP
で認識される標準的な圧縮ファイルの拡張子を取り去ったもの)。
.TP 
\fB\-\-overwrite\fP
抽出時に、既存ファイルを上書きする。
.TP 
\fB\-\-overwrite\-dir\fP
抽出時に、既存ディレクトリのメタデータを上書きする (デフォルト)。
.TP 
\fB\-\-recursive\-unlink\fP
ディレクトリを抽出する前に、同名のディレクトリにあるすべてのファイルを再帰的に削除する。
.TP 
\fB\-\-remove\-files\fP
ファイルをアーカイブに追加した後で、ディスクからファイルを削除する。
.TP 
\fB\-\-skip\-old\-files\fP
抽出時に、既存のファイルを上書きせず、何のメッセージも出さずにスキップする
(訳注: なお、\fB\-\-keep\-old\-files\fP と違い、こちらは返り値がエラーにならない)。
.TP 
\fB\-U\fP, \fB\-\-unlink\-first\fP
抽出する際に、上書きするファイルをまず削除する。
.TP 
\fB\-W\fP, \fB\-\-verify\fP
アーカイブを書き込んだ後で照合する。
.SS 出力ストリームに関する選択
.TP 
\fB\-\-ignore\-command\-error\fP
サブプロセスの終了コードを無視する。
.TP 
\fB\-\-no\-ignore\-command\-error\fP
子プロセスの 0 以外の終了コードをエラーとして扱う (デフォルト)。
.TP 
\fB\-O\fP, \fB\-\-to\-stdout\fP
ファイルを標準出力に抽出する。
.TP 
\fB\-\-to\-command\fP=\fICOMMAND\fP
抽出したファイルをパイプで \fICOMMAND\fP に渡す。
このオプションの引き数は、外部プログラムのパス名であり、
コマンドライン引き数を付けて指定することもできる。外部プログラムが起動されると、
抽出されたファイルの内容が、そのプログラムの標準入力に渡される。また、
追加的なデータが、以下の環境変数を通して外部プログラムに渡されることになる。
.RS
.TP 
\fBTAR_FILETYPE\fP
ファイルのタイプ。1 文字からなり、以下の意味がある。
.sp
.nf
.ta 8n 20n
	f	通常ファイル
	d	ディレクトリ
	l	シンボリックリンク
	h	ハードリンク
	b	ブロックデバイス
	c	キャラクタデバイス
.fi

現在のところサポートされているのは、通常ファイルだけである。
.TP 
\fBTAR_MODE\fP
ファイルの許可属性。8 進数。
.TP 
\fBTAR_FILENAME\fP
ファイル名。
.TP 
\fBTAR_REALNAME\fP
アーカイブに格納されているファイル名。
.TP 
\fBTAR_UNAME\fP
ファイルの所有者名。
.TP 
\fBTAR_GNAME\fP
ファイルの所有グループ名。
.TP 
\fBTAR_ATIME\fP
最終アクセス日時。これは、the Epoch からの秒数を表す 10 進数である。
アーカイブの日時がナノ秒の精度の場合、タイムスタンプの小数点の後ろにナノ秒の部分が付く。
.TP 
\fBTAR_MTIME\fP
最終更新日時。
.TP 
\fBTAR_CTIME\fP
最終ステータス変更日時。
.TP 
\fBTAR_SIZE\fP
ファイルのサイズ。
.TP 
\fBTAR_UID\fP
ファイルの所有者の UID。
.TP 
\fBTAR_GID\fP
ファイルの所有グループの GID。
.RE
.RS

さらに、以下の環境変数に \fBtar\fP の操作モードや処理対象のアーカイブについての情報が含まれている。
.TP 
\fBTAR_VERSION\fP
GNU \fBtar\fP のバージョン番号。
.TP 
\fBTAR_ARCHIVE\fP
\fBtar\fP が処理中のアーカイブの名前。
.TP 
\fBTAR_BLOCKING_FACTOR\fP
現在のブロッキング係数。すなわち、1 レコードを構成する 512 バイトのブロック数。
.TP 
\fBTAR_VOLUME\fP
\fBtar\fP が処理中のボリューム番号
(複数ボリュームのアーカイブを読み込んでいる場合に設定される)。
.TP 
\fBTAR_FORMAT\fP
処理しているアーカイブのフォーマット。\fBgnu\fP, \fBoldgnu\fP, \fBposix\fP,
\fBustar\fP, \fBv7\fP の内の 1 つ。
.TP
\fBTAR_SUBCOMMAND\fP
\fBtar\fP が実行中の操作を表す短いオプション (前に 1 個のダッシュが付いたもの)。
.RE
.SS ファイル属性の操作
.TP 
\fB\-\-atime\-preserve\fP[=\fIMETHOD\fP]
ダンプの対象にした元ファイルのアクセス日時を変更しない。 その方法には、ファイルを読み込んだ後でアクセス日時を元に戻すやり方
(\fIMETHOD\fP=\fBreplace\fP、デフォルト) と、最初からアクセス日時を変更しないやり方 (\fIMETHOD\fP=\fBsystem\fP)
の二つがある。
.TP 
\fB\-\-delay\-directory\-restore\fP
抽出したディレクトリの更新日時や許可属性の決定を、抽出の最後まで遅らせる。
メンバーの順番が通常とは違っているアーカイブから抽出する際には、このオプションを使用するとよい。
(訳注: info tar の "Directory Modification Times and Permissions" を参照。)
.TP 
\fB\-\-group\fP=\fINAME\fP[:\fIGID\fP]
アーカイブに入れるファイルの所有グループを \fINAME\fP にする。 \fIGID\fP まで指定しない場合、\fINAME\fP はグループ名でも、GID
番号でもよい。 その場合、指定しない方 (GID、またはグループ名)  は、使用中のホストのグループデータベースから推測されることになる。

\fB\-\-group\-map\fP=\fIFILE\fP と一緒に使われたときは、 所有グループが \fIFILE\fP
のリストに載っていないファイルに対してのみ効果がある。
.TP 
\fB\-\-group\-map\fP=\fIFILE\fP
グループ変換マップを \fIFILE\fP から読み込む。空行は無視する。 コメントは \fB#\fP で始まり、行末まで続く。\fIFILE\fP
の空行以外の各行では、1 つのグループ変換を定義する。各行は、任意の数のホワイトスペース (訳注: 空白やタブ) で区切られた 2
つのフィールドから構成されていなければならない。 すなわち、次のような形である。

.EX
\fIOLDGRP\fP \fINEWGRP\fP[\fB:\fP\fINEWGID\fP]
.EE

\fIOLDGRP\fP は有効なグループ名か、\fB+\fP を前に付けた GID である。 \fINEWGID\fP を指定しない場合は、\fINEWGRP\fP
の方も、やはり有効なグループ名か、 \fB+\fP\fIGID\fP でなければならない。\fINEWGID\fP まで指定した場合は、\fINEWGRP\fP と
\fINEWGID\fP のどちらも、システムのグループデータベースに載っている必要はない。

つまるところ、所有グループ \fIOLDGRP\fP の各入力ファイルが、所有グループを
\fINEWGRP\fP、GID を \fINEWGID\fP としてアーカイブに格納されることになる。
.TP 
\fB\-\-mode\fP=\fICHANGES\fP
アーカイブに入れるファイルの許可属性を、シンボルによる指定で \fICHANGES\fP にする (訳注: 実際には 8 進数による指定も可能)。
.TP 
\fB\-\-mtime\fP=\fIDATE\-OR\-FILE\fP
アーカイブに入れるファイルの mtime を設定する。\fIDATE\-OR\-FILE\fP は、
ほぼ任意のフォーマットの日付/時刻、または既存ファイルの名前である。 後者の場合、そのファイルの mtime が使われる。
.TP 
\fB\-m\fP, \fB\-\-touch\fP
ファイルの更新日時 (mtime) を抽出しない。
.TP 
\fB\-\-no\-delay\-directory\-restore\fP
前に指定した \fB\-\-delay\-directory\-restore\fP オプションの効果を取り消す。
.TP 
\fB\-\-no\-same\-owner\fP
実行ユーザ自身の資格でファイルを抽出する (一般ユーザのデフォルト)。
.RS
.IP "[\fB訳注\fP]:" 8
抽出したファイルは、自分の資格でディスクに書き込むわけだから、
一般ユーザのデフォルトでは、その所有者属性は当然自分のものになる。
.RE
.TP 
\fB\-\-no\-same\-permissions\fP
アーカイブから許可属性を抽出する際、実行ユーザの umask を適用する (一般ユーザのデフォルト)。
.TP 
\fB\-\-numeric\-owner\fP
ユーザ/グループ名に常に番号を使う。
.TP 
\fB\-\-owner\fP=\fINAME\fP[:\fIUID\fP]
アーカイブに入れるファイルの所有者を \fINAME\fP にする。 \fIUID\fP まで指定しない場合、\fINAME\fP はユーザ名でも、UID 番号でもよい。
その場合、指定しない方 (UID、またはユーザ名)  は、使用中のホストのユーザデータベースから推測されることになる。

\fB\-\-owner\-map\fP=\fIFILE\fP と一緒に使われたときは、 所有者が \fIFILE\fP のリストに載っていないファイルに対してのみ効果がある。
.TP 
\fB\-\-owner\-map\fP=\fIFILE\fP
所有者変換マップを \fIFILE\fP から読み込む。空行は無視する。 コメントは \fB#\fP で始まり、行末まで続く。\fIFILE\fP
の空行以外の各行では、1 つの UID 変換を定義する。各行は、任意の数のホワイトスペース (訳注: 空白やタブ) で区切られた 2
つのフィールドから構成されていなければならない。 すなわち、次のような形である。

.EX
\fIOLDUSR\fP \fINEWUSR\fP[\fB:\fP\fINEWUID\fP]
.EE

\fIOLDUSR\fP は有効なユーザ名か、\fB+\fP を前に付けた UID である。 \fINEWUID\fP を指定しない場合は、\fINEWUSR\fP
の方も、やはり有効なユーザ名か、 \fB+\fP\fIUID\fP でなければならない。\fINEWUID\fP まで指定した場合は、\fINEWUSR\fP と
\fINEWUID\fP のどちらも、システムのユーザデータベースに載っている必要はない。

つまるところ、所有者 \fIOLDUSR\fP の各入力ファイルが、所有者名を
\fINEWUSR\fP、UID を \fINEWUID\fP としてアーカイブに格納されることになる。
.TP 
\fB\-p\fP, \fB\-\-preserve\-permissions\fP, \fB\-\-same\-permissions\fP
ファイルの許可属性に関する情報を抽出する (スーパーユーザのデフォルト)。
.TP 
\fB\-\-same\-owner\fP
アーカイブ中のものと同じ所有者属性を付けて、ファイルを抽出しようと試みる
(スーパーユーザのデフォルト)。
.TP 
\fB\-s\fP, \fB\-\-preserve\-order\fP, \fB\-\-same\-order\fP
引き数である抽出すべきファイルの名前が、アーカイブ中と同じ順番でソートされていると tar に知らせる。(訳注: info tar の "Same
Order" と "Option Summary" に詳しい説明がある。それがわかりやすい。)
.TP 
\fB\-\-sort=\fP\fIORDER\fP
アーカイブを作成する際に、ディレクトリエントリを \fIORDER\fP に基づいてソートする。 \fIORDER\fP は \fBnone\fP, \fBname\fP,
\fBinode\fP のいずれかである。

デフォルトは \fB\-\-sort=none\fP であり、 オペレーティングシステムが返すのと同じ順番でメンバーをアーカイブする。

\fB\-\-sort=name\fP は、作成されるアーカイブのメンバーの並び順を一定で、再現可能なものにする。

\fB\-\-sort=inode\fP を使うと、アーカイブを作成する際のディスクシークの回数を減らし、
そうすることで、実行時間をかなりスピードアップすることができる。 このソート順は、下層で動いているシステムが必要な情報を提供する場合にのみ使用できる。
.SS 拡張ファイル属性
.TP 
\fB\-\-acls\fP
POSIX ACL のサポートを有効にする。
.TP 
\fB\-\-no\-acls\fP
POSIX ACL のサポートを無効にする。
.TP 
\fB\-\-selinux\fP
SELinux コンテキストのサポートを有効にする。
.TP 
\fB\-\-no\-selinux\fP
SELinux コンテキストのサポートを無効にする。
.TP 
\fB\-\-xattrs\fP
拡張属性のサポートを有効にする。
.TP 
\fB\-\-no\-xattrs\fP
拡張属性のサポートを無効にする。
.TP 
\fB\-\-xattrs\-exclude=\fP\fIPATTERN\fP
xattr のキー (訳注: 拡張属性の名前)
について、格納や抽出から除外するパターンを指定する。\fIPATTERN\fP は POSIX
の正規表現である。たとえば、\fB\-\-xattrs\-exclude='^user.'\fP
と指定すれば、名前空間 user の属性を除外することになる。
.RS
.IP "[\fB訳注\fP]"
次の項目についても言えることだが、訳者の手元の tar-1.32 では
\fB\-\-xattrs\-exclude\fP と \fB\-\-xattrs\-include\fP
の働きが、説明とは逆になっているようだ。
つまり、exclude で採用するパターンを指定し、include
で除外するパターンを指定するようになっている。
ご自分のところではどうなるか、確かめていただきたい。
.RE
.TP 
\fB\-\-xattrs\-include=\fP\fIPATTERN\fP
xattr のキーについて、格納や抽出時にインクルードするパターンを指定する。
\fIPATTERN\fP は POSIX の正規表現である。
.SS デバイスの選択と交換
.TP 
\fB\-f\fP, \fB\-\-file\fP=\fIARCHIVE\fP
アーカイブファイルまたはアーカイブデバイスとして \fIARCHIVE\fP を使用する。 このオプションを指定しない場合、\fBtar\fP は、まず環境変数
`TAPE' を調べ、 設定されていれば、その値をアーカイブ名として使用する。 設定されていない場合は、コンパイル時に埋め込まれたデフォルトを使う。
デフォルトの値は \fB\-\-show\-defaults\fP オプションを使って調べることができる。また、\fBtar \-\-help\fP
の出力の末尾を見てもわかる。

アーカイブ名にコロンが含まれている場合、それは、リモートマシンのファイルかデバイスである。 コロンの前の部分はマシン名または IP アドレスと見なされ、
コロンの後の部分はファイルまたはデバイスのパス名と見なされる。 例:

.EX
\-\-file=remotehost:/dev/sr0
.EE

そうしたければ、ホスト名の前にユーザ名を付けることもできる。その場合は、両者の間に \fB@\fP 記号を置く。

デフォルトでは、リモートホストは \fBrsh\fP(1)  コマンドを使ってアクセスされる。 最近では、代わりに \fBssh\fP(1)
を使うのが一般的である。 そうしたい場合は、以下のコマンドラインオプションを指定すればよい。

.EX
\-\-rsh\-command=/usr/bin/ssh
.EE

リモートマシンには \fBrmt\fP(8)  コマンドがインストールされていなければならない。 そのパス名が \fBtar\fP のデフォルトと一致しない場合は、
\fB\-\-rmt\-command\fP オプションを使って正しいパス名を \fBtar\fP に知らせることができる。
.TP 
\fB\-\-force\-local\fP
アーカイブファイル名にコロンが含まれていてもローカルファイルとして扱う。
.TP 
\fB\-F\fP, \fB\-\-info\-script\fP=\fICOMMAND\fP, \fB\-\-new\-volume\-script\fP=\fICOMMAND\fP
各テープの終わりに \fICOMMAND\fP を実行する (\fB\-M\fP が暗黙裡に設定される)。
コマンドには引き数を含めることができる。コマンドは起動されるとき、\fBtar\fP
の環境変数に加えて、以下の環境変数を継承する。
.RS
.TP 
\fBTAR_VERSION\fP
GNU \fBtar\fP のバージョン番号。
.TP 
\fBTAR_ARCHIVE\fP
\fBtar\fP が処理中のアーカイブの名前。
.TP 
\fBTAR_BLOCKING_FACTOR\fP
現在のブロッキング係数。すなわち、1 レコードを構成する 512 バイトのブロック数。
.TP 
\fBTAR_VOLUME\fP
\fBtar\fP が処理中のボリューム番号
(複数ボリュームのアーカイブを読み込んでいる場合に設定される)。
.TP 
\fBTAR_FORMAT\fP
処理しているアーカイブのフォーマット。\fBgnu\fP, \fBoldgnu\fP, \fBposix\fP,
\fBustar\fP, \fBv7\fP の内の 1 つ。
.TP 
\fBTAR_SUBCOMMAND\fP
\fBtar\fP が実行中の操作を表す短いオプション
(前に 1 個のダッシュが付いたもの)。
.TP 
\fBTAR_FD\fP
新しいボリューム名を \fBtar\fP
に伝えるために使うことができるファイルディスクリプタ。
.RE
.PP
.RS

指定された info script が失敗した場合、\fBtar\fP
は終了する。成功した場合は、次のボリュームの書き込みを始める。
.RE
.TP 
\fB\-L\fP, \fB\-\-tape\-length\fP=\fIN\fP
\fIN\fPx1024 バイトを書き込んだ後、テープを入れ替える。
\fIN\fP にはサイズを表す接尾辞 (下記の「\fBサイズ接尾辞\fP」を参照)
を付けることができる。そうした接尾辞は 1024 の代わりに使う乗数を指定している。

このオプションは \fB\-M\fP を暗黙裡に設定する。
.TP 
\fB\-M\fP, \fB\-\-multi\-volume\fP
マルチボリュームアーカイブの作成/内容表示/抽出を行う。
.TP 
\fB\-\-rmt\-command\fP=\fICOMMAND\fP
リモートアーカイブにアクセスする際に、\fBrmt\fP の代わりに \fICOMMAND\fP を使う。 上記の \fB\-f\fP オプションの説明を参照すること。
.TP 
\fB\-\-rsh\-command\fP=\fICOMMAND\fP
リモートアーカイブにアクセスする際に、\fBrsh\fP の代わりに \fICOMMAND\fP を使う。 上記の \fB\-f\fP オプションの説明を参照すること。
.TP 
\fB\-\-volno\-file\fP=\fIFILE\fP
このオプションを \fB\-\-multi\-volume\fP とともに使うと、 \fBtar\fP は、
今マルチボリュームアーカイブのどのボリュームを処理しているかを、\fIFILE\fP に記録することになる。
.SS "レコードとブロック (Device blocking)"
.TP 
\fB\-b\fP, \fB\-\-blocking\-factor\fP=\fIBLOCKS\fP
レコードサイズを \fIBLOCKS\fPx\fB512\fP バイトにする。
.TP 
\fB\-B\fP, \fB\-\-read\-full\-records\fP
内容表示や抽出をする際、ファイルの末尾を示すマーカーを含むレコードが、1
レコードに満たない不完全な入力レコードでも許容する。
(訳注: \fBtar\fP はアーカイブの読み書きをレコード単位で行う。このオプションは、1
レコードの大きさに達しない入力に対する処理を指定している。\fBinfo tar Reading\fP
を参照していただきたい)。
.TP 
\fB\-i\fP, \fB\-\-ignore\-zeros\fP
アーカイブ中の 0 ばかりからなるブロックを無視する。通常、0 で埋められた
512 バイトブロックが 2 個連続すると、それはファイルの末尾 (EOF)
を意味し、これに出会うと tar は読み込みを止める。
このオプションを指定すると、0 のブロックに出会っても読み込みを続けるので、
\fB\-A\fP オプションを付けて作成されたアーカイブを読み込むとき役に立つ。
.TP 
\fB\-\-record\-size\fP=\fINUMBER\fP
レコードサイズを設定する。\fINUMBER\fP は 1
レコードあたりのバイト数であり、\fB512\fP の倍数でなければならない。
\fBサイズ接尾辞\fPを付けることもでき、たとえば、\fB\-\-record\-size=10K\fP
は 10 キロバイトである。有効な接尾辞のリストについては、
サブセクション「\fBサイズ接尾辞\fP」をご覧いただきたい。
.SS アーカイブ形式の選択
.TP 
\fB\-H\fP, \fB\-\-format\fP=\fIFORMAT\fP
指定した形式のアーカイブを作成する。 有効なフォーマットは以下のとおりである。
.RS
.TP 
\fBgnu\fP
GNU tar 1.13.x 形式
.TP 
\fBoldgnu\fP
GNU tar 1.12 以前の GNU 形式
.TP 
\fBpax\fP, \fBposix\fP
POSIX 1003.1\-2001 (pax) 形式
.TP 
\fBustar\fP
POSIX 1003.1\-1988 (ustar) 形式
.TP 
\fBv7\fP
古い V7 tar 形式
.RE
.TP 
\fB\-\-old\-archive\fP, \fB\-\-portability\fP
\fB\-\-format=v7\fP と同じ。
.TP 
\fB\-\-pax\-option\fP=\fIkeyword\fP[[:]=\fIvalue\fP][,\fIkeyword\fP[[:]=\fIvalue\fP]]...
(\fB\-H pax\fP で) \fBPAX\fP アーカイブを作成する際に
pax のキーワードを調節する。このオプションは \fBpax\fP(1)
ユーティリティの \fB\-o\fP オプションと等価である。
.TP 
\fB\-\-posix\fP
\fB\-\-format=posix\fP と同じ。
.TP 
\fB\-V\fP, \fB\-\-label\fP=\fITEXT\fP
\fITEXT\fP というボリューム名 (訳注: ボリュームラベルとも言う)
を付けて、アーカイブを作成する。
内容表示や抽出をする際にこのオプションを指定した場合は、\fITEXT\fP
をボリューム名の glob パターンとして使用する。
.RS
.IP "[\fB訳注\fP]" 8
内容表示や抽出をする際に \fB\-f\fP オプションの代わりに使えるわけではない。
そういうボリューム名を持つアーカイブに対してのみ、内容表示や抽出を行うということであって、
\fB\-f\fP \fIARCHIVE\fP はやはり必要である。
.RE
.SS 圧縮オプション
.TP 
\fB\-a\fP, \fB\-\-auto\-compress\fP
圧縮プログラムを決定するためにアーカイブ拡張子を使用する。
.TP 
\fB\-I\fP, \fB\-\-use\-compress\-program\fP\fI=COMMAND\fP
データを \fICOMMAND\fP でフィルタする。コマンドは、伸長するための
\fB\-d\fP オプションを解するものでなければならない。
引き数にはコマンドラインオプションも含めることができる。
.TP 
\fB\-j\fP, \fB\-\-bzip2\fP
アーカイブを \fBbzip2\fP(1)  でフィルタする。
.TP 
\fB\-J\fP, \fB\-\-xz\fP
アーカイブを \fBxz\fP(1)  でフィルタする。
.TP 
\fB\-\-lzip\fP
アーカイブを \fBlzip\fP(1)  でフィルタする。
.TP 
\fB\-\-lzma\fP
アーカイブを \fBlzma\fP(1)  でフィルタする。
.TP 
\fB\-\-lzop\fP
アーカイブを \fBlzop\fP(1)  でフィルタする。
.TP 
\fB\-\-no\-auto\-compress\fP
圧縮プログラムを決定するためにアーカイブ拡張子を使用しない。
.TP 
\fB\-z\fP, \fB\-\-gzip\fP, \fB\-\-gunzip\fP, \fB\-\-ungzip\fP
アーカイブを \fBgzip\fP(1)  でフィルタする。
.TP 
\fB\-Z\fP, \fB\-\-compress\fP, \fB\-\-uncompress\fP
アーカイブを \fBcompress\fP(1)  でフィルタする。
.TP 
\fB\-\-zstd\fP
アーカイブを \fBzstd\fP(1)  でフィルタする。
.SS ローカルファイルの選択
.TP 
\fB\-\-add\-file\fP=\fIFILE\fP
\fIFILE\fP をアーカイブに追加する (ファイル名がダッシュで始まる場合に便利である)。
.TP 
\fB\-\-backup\fP[=\fICONTROL\fP]
上書きや削除をする前にバックアップを行う。引き数 \fICONTROL\fP
を指定すれば、それがバックアップのやり方を決める。有効な値は以下のとおりである。
(訳注: このオプションは、アーカイブの作成 (\fB\-c\fP)、抽出
(\fB\-x\fP)、どちらでも使えるが、\fB\-A\fP, \fB\-r\fP, \fB\-u\fP,
\fB\-\-delete\fP では無効のようだ。)
.RS
.TP 
\fBnone\fP, \fBoff\fP
バックアップを全く作成しない。
.TP 
\fBt\fP, \fBnumbered\fP
番号付きのバックアップを作成する。
.TP 
\fBnil\fP, \fBexisting\fP
番号付きのバックアップが存在すれば、番号付きのバックアップを、
存在しなければ、単純形式のバックアップを作成する。
.TP 
\fBnever\fP, \fBsimple\fP
常に単純形式のバックアップを行う。
.RE
.PP
.RS
\fICONTROL\fP が指定されない場合、環境変数 \fBVERSION_CONTROL\fP
から値を取得する。それも指定されていない場合は、\fBexisting\fP
が指定されているものと見なされる。
.RE
.TP 
\fB\-C\fP, \fB\-\-directory\fP=\fIDIR\fP
何らかの操作を行う前に、ディレクトリ \fIDIR\fP に移動する。
このオプションは順番を意識する。すなわち、その後に続くすべてのオプションに影響を及ぼす。
.TP 
\fB\-\-exclude\fP=\fIPATTERN\fP
\fBglob\fP(3)  スタイルのワイルドカードパターン \fIPATTERN\fP にマッチするファイルを除外する (訳注: つまり、\fIPATTERN\fP
の指定にシェル式のワイルドーカードが使えるということ)。
.TP 
\fB\-\-exclude\-backups\fP
バックアップファイルとロックファイルを除外する。
.TP 
\fB\-\-exclude\-caches\fP
\fBCACHEDIR.TAG\fP という名前のファイルを含むディレクトリの中身を除外する。 ただし、タグファイル自体は除外しない。(訳注:
\fBCACHEDIR.TAG\fP とそれが含むべき内容については、
<http://www.brynosaurus.com/cachedir/spec.html>、または
<http://bford.info/cachedir/spec.html> をご覧いただきたい。)
.TP 
\fB\-\-exclude\-caches\-all\fP
\fBCACHEDIR.TAG\fP という名前のファイルを含むディレクトリとタグファイル自体を除外する。
.TP 
\fB\-\-exclude\-caches\-under\fP
\fBCACHEDIR.TAG\fP という名前のファイルを含むディレクトリ以下のすべてを除外する (訳注: ただし、そのディレクトリ自体は除外しない)。
.TP 
\fB\-\-exclude\-ignore=\fP\fIFILE\fP
ディレクトリをダンプする前に、\fIFILE\fP というファイルがそこに含まれているかを調べる。
含まれている場合は、そのファイルから除外パターンを読み込む。
このパターンは、そのディレクトリにのみ影響する。
.RS
.IP "[\fB訳注\fP]" 8
訳者の手元の tar-1.32 では、このオプションの動作は、次の項目の
\fB\-\-exclude\-ignore\-recursive\fP と同じであるようだ。
すなわち、そのディレクトリ以下のサブディレクトリにも影響する。
ご自分のところではどうなるか、確かめていただきたい。
.RE
.TP 
\fB\-\-exclude\-ignore\-recursive=\fP\fIFILE\fP
\fB\-\-exclude\-ignore\fP と同様であるが、\fIFILE\fP
から読み込んだパターンは、そのディレクトリとすべてのサブディレクトリに影響を及ぼす。
.TP 
\fB\-\-exclude\-tag\fP=\fIFILE\fP
\fIFILE\fP というファイルを含むディレクトリの中身を除外する。ただし、 \fIFILE\fP 自体は除外しない。
.TP 
\fB\-\-exclude\-tag\-all\fP=\fIFILE\fP
\fIFILE\fP というファイルを含むディレクトリを除外する。
.TP 
\fB\-\-exclude\-tag\-under\fP=\fIFILE\fP
\fIFILE\fP というファイルを含むディレクトリ以下のすべてを除外する (訳注: ただし、そのディレクトリ自体は除外しない)。
.TP 
\fB\-\-exclude\-vcs\fP
バージョン管理システムのディレクトリを除外する。
.TP 
\fB\-\-exclude\-vcs\-ignores\fP
VCS 独自の除外ファイルからパターンを読み込み、それにマッチするファイルを除外する。 サポートされているファイルは、 \fB.cvsignore\fP,
\&\fB.gitignore\fP, \fB.bzrignore\fP, \fB.hgignore\fP である。
.TP 
\fB\-h\fP, \fB\-\-dereference\fP
シンボリックリンクを辿り、それが指しているファイルをアーカイブに入れる
(訳注: シンボリックリンクが指している実ファイルが、
同一アーカイブに収録されるときは、そのハードリンクを、収録されないときは実ファイルを、
シンボリックリンクのファイル名でアーカイブに入れるようだ)。
.TP 
\fB\-\-hard\-dereference\fP
ハードリンクを辿り、それが指しているファイルをアーカイブに入れる
(訳注: ハードリンクとしてではなく、独立したファイルとしてアーカイブに入れる)。
.TP 
\fB\-K\fP, \fB\-\-starting\-file\fP=\fIMEMBER\fP
アーカイブ内の指定されたメンバーから (抽出や内容表示を) 開始する。
.TP 
\fB\-\-newer\-mtime\fP=\fIDATE\fP
\fIDATE\fP 以降にデータが変更されたファイルを処理の対象にする。 \fIDATE\fP が \fB/\fP または \fB.\fP で始まる場合は、
ファイル名と見なされ、そのファイルの mtime が日付として使われる。
.TP 
\fB\-\-no\-null\fP
これより前に指定された \fB\-\-null\fP オプションの効果を無効にする。
.TP 
\fB\-\-no\-recursion\fP
ディレクトリにおいて自動的な下降をしないようにする。
.RS
.IP "[\fB訳注\fP]:" 8
わかりにくいと思うので、もう少し説明する。\fB\-\-create\fP 
でこのオプションを使用すると、アーカイブする対象としてディレクトリを指定した場合、
そのディレクトリ自体はアーカイブに入れられるが、
そのディレクトリにあるファイルやサブディレクトリは、自動的にはアーカイブに格納されなくなる。
ファイルも一緒に格納したいのなら、それもアーカイブする対象として指定しなければならないのだ。
従って、このオプションは、たとえば find コマンドと \fB\-\-files\-from='\-\'\fP 
オプションを使って、アーカイブする対象のリストを厳密に指定するときなどに、役に立つ。
\fB\-\-extract\fP と組み合わせ、抽出対象にディレクトリを指定した場合は、
そのディレクトリだけが抽出され、ディレクトリの中身は抽出されない。
なお、このオプションはコマンドラインにおける順番を意識する。
詳しいことは \fBinfo tar recurse\fP を参照していただきたい。
.RE
.TP 
\fB\-\-no\-unquote\fP
指定された入力ファイル名やメンバー名中の、バックスラッシュでクォートされたシーケンスを解釈・変換しない
(訳注: すなわち、\et, \en, \eb などをタブ、改行などとしてではなく、文字通り
\et, \en, \eb として扱う。なお、このオプションはコマンドライン上の位置が意味を持つ)。
.TP 
\fB\-\-no\-verbatim\-files\-from\fP
ファイルリストから読み込んだ各行を、あたかもコマンドラインから打ち込まれたかのように処理する。
すなわち、前後の空白を除去した後の文字列がダッシュで始まる場合は、\fBtar\fP
のコマンドラインオプションと見なす。

これはデフォルトの動作である。この \fB\-\-no\-verbatim\-files\-from\fP
オプションがあるのは、\fB\-\-verbatim\-files\-from\fP オプションを指定した後で動作を元に戻すためである。

このオプションは指定する位置が意味を持つ。 すなわち、コマンドラインでこのオプションより後に指定されるすべての \fB\-\-files\-from\fP
オプションに影響し、\fB\-\-verbatim\-files\-from\fP オプションが現れるか、コマンドラインの末尾に達するまで効果が続く。

\fB\-\-no\-null\fP オプションを指定すると、このオプションが暗黙裡に設定される。
.TP 
\fB\-\-null\fP
後に続く \fB\-T\fP オプションに対して、null で終端された名前を文字通りに読み込むように指示する
(つまり、\fB\-T\fP オプションでダッシュで始まる名前の特別扱いをしなくなる)。

\fB\-\-verbatim\-files\-from\fP も参照すること。
.RS
.IP "[\fB訳注\fP]"
\fB\-\-null\fP オプションの第一の働きは、それ以後に現れる \fB\-T\fP
オプションに対して、ファイルリストの各項目が、改行ではなく、
ASCII NUL で区切られていると知らせることである。
上の説明で述べているようなことは、二次的な働きというか、むしろ、
このオプションによって自動的に設定される
\fB\-\-verbatim\-files\-from\fP の働きだと言える。
.RE
.TP 
\fB\-N\fP, \fB\-\-newer\fP=\fIDATE\fP, \fB\-\-after\-date\fP=\fIDATE\fP
DATE より新しいファイルのみを格納する。 \fIDATE\fP が \fB/\fP または \fB.\fP で始まっている場合は、
ファイル名と見なされ、そのファイルの ctime が日付として使われる。
.TP 
\fB\-\-one\-file\-system\fP
アーカイブを作成する際に、ローカルファイルシステムに限定する。
.TP 
\fB\-P\fP, \fB\-\-absolute\-names\fP
アーカイブを作成する際に、ファイル名の先頭のスラッシュを除去しない。
.TP 
\fB\-\-recursion\fP
ディレクトリを再帰的に辿る (デフォルト)。
.TP 
\fB\-\-suffix\fP=\fISTRING\fP
削除する前にバックアップを作り、拡張子を通常のものから変更する。 環境変数 \fBSIMPLE_BACKUP_SUFFIX\fP
によって変更されていないかぎり、 デフォルトの拡張子は \fB~\fP である。
.TP 
\fB\-T\fP, \fB\-\-files\-from\fP=\fIFILE\fP
アーカイブから抽出する名前やアーカイブに格納する名前を
\fIFILE\fP から読み込む。

別の指定がないかぎり、\fIFILE\fP の内容は、ASCII \fBLF\fP で区切られた名前のリストでなければならない (つまり、1 行に 1
個の名前だ)。 読み込まれた名前は、コマンドラインの引き数と同じやり方で処理される。 すなわち、引用符が除去され、単語に分割され、そして、ダッシュ
(\fB\-\fP)  で始まる文字列があれば、\fBtar\fP のコマンドラインオプションとして処理される。
.RS
.IP "[\fB訳注\fP]:" 8
上のパラグラフの後半で説明しているのは、オプションを指定した行が \fIFILE\fP
中にあるかどうかを知るために \fBtar\fP
が取る手続きであって、ファイル名を指定した行の扱いには関係がないようだ。
そうした行は、あるがままに、すなわち、引用符に囲まれていれば、
引用符が付いたものとして、先頭に空白があれば、空白に始まるファイル名として、扱われる。また、手元の
\fBtar\fP 1.32 では、オプションの行でも、引用符の除去はやっていないようである。
.RE

.PP
.RS
この動作が望ましくない場合は、 \fB\-\-verbatim\-files\-from\fP オプションでやめさせることができる。

\fB\-\-null\fP オプションを指定すると、\fBtar\fP は \fIFILE\fP 中の名前の区切りを \fBLF\fP ではなく、ASCII \fBNUL\fP
文字にする。 これはリストが \fBfind\fP(1)  の \fB\-print0\fP アクションで生成されている場合に役に立つ。
.RE
.TP 
\fB\-\-unquote\fP
指定された入力ファイル名やメンバー名中の、バックスラッシュでクォートされたシーケンスを解釈・変換する
(デフォルト)。(訳注: すなわち、\et, \en, \eb
などをタブ、改行などとして扱うということ。
なお、このオプションはコマンドライン上の位置が意味を持つ。)
.TP 
\fB\-\-verbatim\-files\-from\fP
ファイルリストから読み込んだ各行がダッシュで始まっていても、フィル名として扱う。
ファイルリストの取得には、\fB\-\-files\-from\fP (\fB\-T\fP) オプションを使用する。\fBtar\fP
のデフォルトの動作は、ファイルリストから読み込んだ名前を、
あたかもコマンドラインから打ち込まれたかのように処理することである。
すなわち、ダッシュで始まっている名前があれば、
\fBtar\fP のオプションと見なす。この \fB\-\-verbatim\-files\-from\fP
オプションは、そうした動作をしないようにするのである。

このオプションは、コマンドラインでこれより後に指定されるすべての \fB\-\-files\-from\fP オプションに影響を与える。 このオプションの効果は、
\fB\-\-no\-verbatim\-files\-from\fP　 オプションによって元に戻すことができる。

\fB\-\-null\fP オプションを指定すると、このオプションが暗黙裡に設定される。

\fB\-\-add\-file\fP も参照すること。
.TP 
\fB\-X\fP, \fB\-\-exclude\-from\fP=\fIFILE\fP
FILE にリストされたパターンにマッチするファイルを除外する。
.SS ファイル名の変更
.TP 
\fB\-\-strip\-components\fP=\fINUMBER\fP
抽出時にファイル名の先頭から \fINUMBER\fP 個の構成要素 (訳注: 要するに、\fINUMBER\fP 個のディレクトリ部分) を取り去る。
.TP 
\fB\-\-transform\fP=\fIEXPRESSION\fP, \fB\-\-xform\fP=\fIEXPRESSION\fP
sed の置換表現 \fIEXPRESSION\fP をファイル名の変更に使う。
.SS ファイル名のマッチングに関するオプション
これらのオプションは除外 (exclude) パターンと包摂 (include) パターンの両方に影響する。
.TP 
\fB\-\-anchored\fP
パターンはファイル名の先頭にマッチする。
.TP 
\fB\-\-ignore\-case\fP
大文字小文字を区別しない。
.TP 
\fB\-\-no\-anchored\fP
パターンはどの \fB/\fP の後にでもマッチする (除外時のデフォルト)。
.TP 
\fB\-\-no\-ignore\-case\fP
大文字小文字を区別してマッチングを行う (デフォルト)。
.TP 
\fB\-\-no\-wildcards\fP
パターンの文字列を文字通りに解してマッチングを行う (訳注: これはワイルドカード文字をただの文字として扱うということ。\et, \en
などを文字通りに読む方は、\fB\-\-no\-unquote\fP を使う)。
.TP 
\fB\-\-no\-wildcards\-match\-slash\fP
ワイルドカードは \fB/\fP にマッチしない。
.TP 
\fB\-\-wildcards\fP
ワイルドカードを使う (除外時のデフォルト)。
.TP 
\fB\-\-wildcards\-match\-slash\fP
ワイルドカードは \fB/\fP にマッチする (除外時のデフォルト)。
.SS 情報出力
.TP 
\fB\-\-checkpoint\fP[=\fIN\fP]
\fIN\fP レコード (デフォルトは 10) ごとに進捗メッセージを表示する。
.TP 
\fB\-\-checkpoint\-action\fP=\fIACTION\fP
チェックポイントごとに \fIACTION\fP を実行する。
.TP 
\fB\-\-clamp\-mtime\fP
\-\-mtime で指定された日時より新しいファイルに対してのみ、日時を設定する。
.TP 
\fB\-\-full\-time\fP
高精度でファイルの日時を表示する (訳注: tar 1.32 では秒まで。\fB\-v\fP オプションが必要)。
.TP 
\fB\-\-index\-file\fP=\fIFILE\fP
詳細出力を \fIFILE\fP に書き出す。
.TP 
\fB\-l\fP, \fB\-\-check\-links\fP
ハードリンクのすべてをダンプしていない場合に、その旨メッセージを出す。
.TP 
\fB\-\-no\-quote\-chars\fP=\fISTRING\fP
\fISTRING\fP に列挙された文字を、表示するときにクォートする文字のリストから外す (訳注: リストから外せるのは、\fB\-\-quote\-chars\fP
によって追加された文字だけであり、 デフォルトでクォートすることになっている文字を外せるわけではない。次の項目ともども info tar を参照)。
.TP 
\fB\-\-quote\-chars\fP=\fISTRING\fP
\fISTRING\fP に列挙された文字を、表示するときにクォートする文字のリストに追加する。
.TP 
\fB\-\-quoting\-style\fP=\fISTYLE\fP
ファイル名やメンバー名を表示するときのクォート形式を設定する。 \fISTYLE\fP に指定できる値は以下のとおりである。 \fBliteral\fP,
\fBshell\fP, \fBshell\-always\fP, \fBc\fP, \fBc\-maybe\fP, \fBescape\fP, \fBlocale\fP,
\fBclocale\fP.
.TP 
\fB\-R\fP, \fB\-\-block\-number\fP
各メッセージにアーカイブ中のブロック番号を付ける。
.TP 
\fB\-\-show\-omitted\-dirs\fP
内容表示や抽出をする際、検索の基準にマッチしないディレクトリに出会うごとに、その旨表示する
(訳注: 要するに、何らかの理由で、内容表示や抽出をスキップするディレクトリがあれば、
それを知らせるということ。\fBinfo tar verbose\fP
を実行すると、そのセクション中にこのオプションのかなり詳しい説明がある)。
.TP 
\fB\-\-show\-transformed\-names\fP, \fB\-\-show\-stored\-names\fP
ファイル名やアーカイブ名を表示する際、\fB\-\-strip\fP や \fB\-\-transform\fP オプションで変更した後の名前を使う (訳注:
デフォルトでは変更前の名前が使われる)。
.TP 
\fB\-\-totals\fP[=\fISIGNAL\fP]
アーカイブを処理した後で総バイト数を表示する。
\fISIGNAL\fP を指定すると、そのシグナルが送られたときの総バイト数を表示する。
指定できるシグナルは、 \fBSIGHUP\fP, \fBSIGQUIT\fP, \fBSIGINT\fP, \fBSIGUSR1\fP,
\fBSIGUSR2\fP である。接頭辞の \fBSIG\fP は省略できる。
.TP 
\fB\-\-utc\fP
ファイル更新日時を UTC で表示する。
.TP 
\fB\-v\fP, \fB\-\-verbose\fP
処理したファイルの詳しいリストを出力する。
このオプションをコマンドラインで指定した数だけ、詳細レベルが
1 つずつ上がる。最大の詳細レベルは 3 である。それぞれの詳細レベルで
tar の出力がどのようになるかについては、\fBGNU Tar Manual\fP
のサブセクション 2.5.2 "\fBThe '\-\-verbose' Option\fP"
に詳しい説明があるので、参照していただきたい
(訳注: \fBinfo tar 'verbose tutorial'\fP で見ることができる)。
.TP 
\fB\-\-warning\fP=\fIKEYWORD\fP
\fIKEYWORD\fP で特定される警告メッセージを有効、または無効にする。
\fIKEYWORD\fP の前に \fBno\-\fP を付ければ、そのメッセージは抑制され、
付けなければ、有効になる。

\fB\-\-warning\fP のメッセージを複数指定すると、前のものに後のものが積み重なって行く。

以下のキーワードは \fBtar\fP の操作全般を制御するものである:
.RS
.TP 
\fBall\fP
すべての警告メッセージを有効する。これがデフォルト。
.TP 
\fBnone\fP
すべての警告メッセージを無効にする。
.TP 
\fBfilename\-with\-nuls\fP
"%s: 読み込んだファイル名にヌル文字が含まれています"
.TP 
\fBalone\-zero\-block\fP
"%s に孤立したゼロブロックがあります"
.HP
以下のキーワードは \fBtar \-\-create\fP に対して適用される:
.TP 
\fBcachedir\fP
"%s: キャッシュディレクトリの目印 %s があります; %s"
.TP 
\fBfile\-shrank\fP
"%s: ファイルが %s バイト小さくなったので、ゼロで埋めます"
.TP 
\fBxdev\fP
"%s: ファイルが異なるファイルシステム上にあるので、ダンプしません"
.TP 
\fBfile\-ignored\fP
"%s: 未知のファイルタイプ。このファイルは無視します"
.br
"%s: ソケットは無視します"
.br
"%s: door は無視します"
.TP 
\fBfile\-unchanged\fP
"%s: ファイルが変更されていないので、ダンプしません"
.TP 
\fBignore\-archive\fP
"%s: ファイルがこのアーカイブなので、ダンプしません"
.TP 
\fBfile\-removed\fP
"%s: ファイルが読み込む前に削除されました"
.TP 
\fBfile\-changed\fP
"%s: 読み込んだファイルが変更されています"
.TP 
\fBfailed\-read\fP
読み込み不能なファイルやディレクトリについての警告メッセージを抑止する。
このキーワードは \fB\-\-ignore\-failed\-read\fP
オプションと一緒に使用した場合にのみ適用される。
.HP
以下のキーワードは \fBtar \-\-extract\fP に対して適用される:
.TP 
\fBexisting\-file\fP
"%s: 既存ファイルをスキップします"
.TP 
\fBtimestamp\fP
"%s: あまりにも古いタイムスタンプ %s"
.br
"%s: タイムスタンプ %s は %s 秒後の日時を示しています"
.TP 
\fBcontiguous\-cast\fP
"連続したファイル (configuous files) を普通のファイルとして取り出します"
.TP 
\fBsymlink\-cast\fP
"シンボリックリンクをハードリンクとして取り出してみます"
.TP 
\fBunknown\-cast\fP
"%s: 未知のファイルタイプ '%c'、通常のファイルとして抽出します"
.TP 
\fBignore\-newer\fP
"現在の %s の方が新しいか同じです"
.TP 
\fBunknown\-keyword\fP
"未知の拡張ヘッダキーワード '%s' を無視します"
.TP 
\fBdecompress\-program\fP
ある伸長プログラムの実行に失敗して、
別のプログラムで代用しようとしたときに出る詳しい説明をコントロールする。
この警告は、デフォルトでは無効になっている (\fB\-\-verbose\fP 使用時を除く)。
この警告を有効にしたときに表示されるよくある例は、次のようなものである。

.EX
$ tar \-\-warning=decompress\-program \-x \-f archive.Z
tar (child): cannot run compress: No such file or directory
tar (child): trying gzip
.EE

このメッセージは、\fBtar\fP が最初に \fBcompress\fP を使って \fBarchive.Z\fP を伸長しようとして、それに失敗し、\fBgzip\fP
に切り替えたことを示している。
.TP 
\fBrecord\-size\fP
"レコードサイズ = %lu ブロック"
.HP
インクリメンタルな抽出を制御するキーワード:
.TP 
\fBrename\-directory\fP
"%s: ディレクトリ名が %s から変更されました"
.br
"%s: ディレクトリ名が変更されました"
.TP 
\fBnew\-directory\fP
"%s: ディレクトリは新しく作られました"
.TP 
\fBxdev\fP
"%s: ディレクトリは異なるデバイス上にあるので消去しません"
.TP 
\fBbad\-dumpdir\fP
"不正形式の dumpdir: 'X' が未使用"
.RE
.TP 
\fB\-w\fP, \fB\-\-interactive\fP, \fB\-\-confirmation\fP
すべての動作に対して確認を求める。
.SS 互換オプション
.TP 
\fB\-o\fP
作成時は \fB\-\-old\-archive\fP と同じであり、抽出時は \fB\-\-no\-same\-owner\fP
と同じである。
.SS サイズ接尾辞
.sp
.nf
.ta 8n 18n 42n
.ul
	接尾辞	単位	バイトサイズ
	b	ブロック	\fISIZE\fP x 512
	B	キロバイト	\fISIZE\fP x 1024
	c	バイト	\fISIZE\fP
	G	ギガバイト	\fISIZE\fP x 1024^3
	K	キロバイト	\fISIZE\fP x 1024
	k	キロバイト	\fISIZE\fP x 1024
	M	メガバイト	\fISIZE\fP x 1024^2
	P	ペタバイト	\fISIZE\fP x 1024^5
	T	テラバイト	\fISIZE\fP x 1024^4
	w	ワード	\fISIZE\fP x 2
.fi
.PP
.SH 返り値
tar の終了コードは、要求された操作の遂行に成功したかどうか、 成功しなかった場合は、どのようなエラーが起きたかを示している。
.TP 
\fB0\fP
成功して終了した。
.TP 
\fB1\fP
\fIいくつかのファイルに相違がある。\fP tar が \fB\-\-compare\fP (\fB\-\-diff\fP, \fB\-d\fP)
コマンドラインオプションとともに起動された場合は、
アーカイブ内のファイルにディスク上の同名ファイルと異なっているものがあるということである。
\fB\-\-create\fP, \fB\-\-append\fP, \fB\-\-update\fP
オプションのいずれかが指定された場合は、アーカイブ処理の最中に変更されたファイルがあり、
従って、生成されたアーカイブはファイルセットの正確なコピーを保持していないことを示している。
.TP 
\fB2\fP
\fI致命的なエラー。\fP これは、何らかの致命的で回復不能なエラーが起きたことを表している。
.PP
\fBtar\fP によって起動されたサブプロセスが、0 以外の終了コードで終了した場合は、\fBtar\fP
自身もその終了コードで終了する。たとえば、圧縮オプション (\fB\-z\fP など)
を使用したとき、外部の圧縮プログラムが実行に失敗すると、そうしたことが起こり得る。
他の例としては、\fBrmt\fP がリモートデバイスへのバックアップ中に失敗した場合などがある。
.SH 関連項目
\fBbzip2\fP(1), \fBcompress\fP(1), \fBgzip\fP(1), \fBlzma\fP(1), \fBlzop\fP(1), \fBrmt\fP(8),
\fBsymlink\fP(7), \fBxz\fP(1), \fBzstd\fP(1).
.PP
詳細な \fBtar\fP マニュアルは、 \fBinfo tar\fP を実行するか、 \fBemacs\fP(1)  の info
モードを使用すれば、読むことができる。
.PP
また、以下のサイトに行けば、様々な形式にした \fBGNU tar\fP マニュアルのオンライン版を見つけることができる。
.PP
.in +4
\fBhttp://www.gnu.org/software/tar/manual\fP
.SH バグ報告
バグは <bug\-tar@gnu.org> に報告していただきたい。
.SH 著作権
Copyright \(co 2013 Free Software Foundation, Inc.
.br
.na
License GPLv3+: GNU GPL version 3 or later
<http://gnu.org/licenses/gpl.html>
.br
.ad
This is free software: you are free to change and redistribute it.  There is
NO WARRANTY, to the extent permitted by law.
.SH 訳者謝辞
\fBtar\fP の出す警告文は、Masahito Yamaga さんによる tar-1.32 
のメッセージカタログの翻訳を利用させていただきました。お礼を申し上げます。
ただし、このマニュアル内で読みやすいように、すこし手を加えたところもあります。
ご了承ください。
.PP
なお、翻訳に当たっては、できるだけ実際に動かして確認していますが、
テープドライブは使ったことがありません。そのため、そのへんの翻訳については、
間違いがあるかもしれません。お気づきの点がありましたら、ご教示いただけるとありがたく思います。
.\" Local variables:
.\" eval: (add-hook 'write-file-hooks 'time-stamp)
.\" time-stamp-start: ".TH [A-Z_][A-Z0-9_.\\-]* [0-9] \""
.\" time-stamp-format: "%:B %:d, %:y"
.\" time-stamp-end: "\""
.\" time-stamp-line-limit: 20
.\" end:
