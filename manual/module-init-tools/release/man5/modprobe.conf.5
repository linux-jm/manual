.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.\"
.\" Japanese Version Copyright (C) 2005 Suzuki Takashi
.\"         all rights reserved.
.\" Translated Sun Jul 10 22:56:20 JST 2005
.\"         by Suzuki Takashi <JM@linux.or.jp>.
.\"
.TH MODPROBE.CONF 5 "30 September 2004" "" ""

.SH 名前
modprobe.conf \- modprobe の設定ファイル
.SH このマニュアルについて
.PP
これは、module-init-tools パッケージに所属する \fBmodprobe\fP
の設定ファイル \fBmodprobe.conf\fP の説明です。module-init-tools
は、現在では kmod パッケージに引き継がれており、設定ファイルのマニュアルも
\fBmodprobe.d\fP に変わっているので、そちらをご覧になることをお勧めします。
(2022/12/02, Linux JM Project)
.SH 説明
.PP
\fBmodprobe\fP コマンドはモジュールの依存関係に応じて 複数のモジュールを追加したり削除したりできるため、
これらのモジュールにどのオプションを使うかを指定する手段が必要である。 \fI/etc/modprobe.conf\fP (または
\fI/etc/modprobe.conf\fP が存在しない場合、 \fI/etc/modprobe.d\fP ディレクトリ以下のすべてのファイル) は
必要に応じてこれらのオプションを指定する。 また、便利なようにエイリアス (モジュールの別名) を作成するためにも用いられる。 最後に、
(複数のモジュールを登録するなどの) 特別な要求に応えるために、 \fBmodprobe\fP の通常の振る舞いを完全に無効にして乗っ取ることができる。
.PP
モジュール名やエイリアス名には (他のモジュール名と同様に)  \- や _ を含めることができる。 ここで、 \- と _
はすべてのモジュールコマンドにおいて、 互いに入れ替え可能である (区別されない) ことに注意。
.PP
\fImodprobe.conf\fP や \fImodprobe.d\fP 以下のファイルの形式は単純である。 1 行に 1 コマンドで、 空行と #
で始まる行は無視される (コメントを追加するのに使える) 。 行末の \e は次の行に続くことを意味し、これを使えばファイルが少し見やすくなる。
.PP
書式は \fImodules.conf\fP を簡単にしたものである。
.SH コマンド
.TP 
\fBalias \fP\fIwildcard\fP\fB \fP\fImodulename\fP\fB \fP
モジュールの別名を付ける。 例えば、 "alias my\-mod really_long_modulename" とすると、 "modprobe
really_long_modulename" の代わりに "modprobe my\-mod" を使うことができる。
シェル形式のワイルドカードも使うことができ、 "alias my\-mod* really_long_modulename" とすると "modprobe
my\-mod\-something" も同じ効果となる。 他のエイリアスに対するエイリアスを設定することはできない (正しく動作しない) が、
エイリアスにオプションを設定することができ、 それらは他のオプションに追加される。

モジュールはそれ自身にエイリアスを持つことができる点に注意。 それらは \fBmodinfo\fP で見ることができる。
これらのエイリアスは最後の望みとして使われる (つまり、その名前の実モジュールもなく、設定ファイル中に その名前の \fBinstall\fP,
\fBremove\fP, \fBalias\fP コマンドが 存在しない場合に使われる) 。
.TP 
\fBoptions \fP\fImodulename\fP\fB \fP\fIoption...\fP\fB \fP
このコマンドで モジュール \fImodulename\fP (エイリアスも可) に オプションを追加することができる。 ここで設定されたオプションは
カーネルに登録される際に毎回使われ、 (\fBmodprobe\fP \fImodulename\fP で) 直接登録される場合にも
そのモジュールに依存するモジュールと一緒に登録される場合にも 使われる。

モジュール自身に対する \fBoption\fP 、 エイリアスに対する \fBoption\fP 、 コマンドラインのオプションは、
全てのオプションがいっしょに渡される。
.TP 
\fBinstall \fP\fImodulename\fP\fB \fP\fIcommand...\fP\fB \fP
\fImodprobe.conf\fP の中でもっとも強力なコマンドである。 \fBmodprobe\fP は、 通常はカーネルにモジュールを登録するが、
install コマンドを記述すると、 代わりにここで指定された command を実行する。 command はどんなシェルコマンドでもよい。
そのため、どんな複雑な処理でも思いどおりに指定できる。 例えば、モジュール "fred" が、 "barney" がインストールされている状態のほうが
うまく動作する (が依存関係にないので \fBmodprobe\fP が自動的にロードしない) 場合、 "install fred
/sbin/modprobe barney; /sbin/modprobe \-\-ignore\-install fred" と書けば、
望みどおりのことをさせることができる。 ここで、 \fB\-\-ignore\-install\fP は 2 番目の \fBmodprobe\fP が同じ
\fBinstall\fP コマンドを 再び実行しないようにするためのものである。 \fBremove\fP も参照。

\fBinstall\fP を使って、 実際には存在しないモジュールを作ることもできる。 例えば、 "install probe\-ethernet
/sbin/modprobe e100 || /sbin/modprobe eepro100" と書けば、 "modprobe
probe\-ethernet" としたときに、 まず e100 ドライバを試し、次に eepro100 を試す。
.TP 
\fBremove \fP\fImodulename\fP\fB \fP\fIcommand...\fP\fB \fP
上の \fBinstall\fP コマンドと同様であるが、 "modprobe \-r" が呼び出されたときに実行される。 上の 2
つの例を削除にあてはめると、 "remove fred /sbin/modprobe \-r \-\-ignore\-remove fred &&
/sbin/modprobe \-r barney" および "remove probe\-ethernet /sbin/modprobe \-r
eepro100 || /sbin/modprobe \-r e100" のようになる。
.TP 
\fBinclude \fP\fIfilename\fP\fB \fP
このコマンドを使うと、 他の設定ファイルまたはディレクトリ全体を読み込むことができ、 これが便利なこともある。 読み込まれたファイル中のエイリアスは
現在のファイルで定義されたエイリアスを上書きすることに注意。
.SH 下位互換性
.PP
現在の (2.4 または 2.2 の) モジュール設定から \fImodprobe.conf\fP を生成してくれる
\fBgenerate_modprobe.conf\fP というプログラムがある。
.PP
書式は以前の \fI/etc/modules.conf\fP と似ているが、 多くの機能が削除されている。 これには 2 つの理由がある: まず、
install および remove コマンドでほとんど何でもできる。 二つ目に、 module\-init\-tools の modprobe は
他のツールで簡単に置き換えることができるよう、 十分単純になるように設計されている。
.PP
実際のモジュールの登録の複雑さが 3 つのシステムコール (open, read, init_module) で軽減され、 \fImodules.dep\fP
ファイルが単純でオープンであるおかげで、 もし必要があればもっと強力な改良版の modprobe を作ることも可能である。
.SH 著作権
.PP
このマニュアルページの著作権表示は Copyright 2004, Rusty Russell, IBM Corporation.
.SH 関連項目
.PP
\fBmodprobe\fP(8), \fBmodules.dep\fP(5)
